---
description: Internationalization rules for Whisk Desktop (Vietnamese + English)
---

# Internationalization Rules

## Supported Languages

| Code | Language          | File               |
| ---- | ----------------- | ------------------ |
| `en` | English (default) | `app/i18n/en.json` |
| `vi` | Vietnamese        | `app/i18n/vi.json` |

## Key Naming Convention

Use dot-notated, hierarchical keys:

```
<page_or_widget>.<element>
```

Examples:

```json
{
  "nav.dashboard": "Dashboard",
  "nav.settings": "Settings",
  "config.model": "Model",
  "config.prompt": "Prompt",
  "login.button": "Log In",
  "login.empty_key": "Please enter your key code",
  "project.title": "Project Manager",
  "project.close": "Close"
}
```

## Rules

1. **NEVER hardcode user-facing text in Python** — always use `translator.t("key")`
2. **Every new key MUST be added to BOTH** `en.json` and `vi.json`
3. **Keys are lowercase**, words separated by underscores within a segment
4. **Group by feature**: `config.*`, `login.*`, `project.*`, `cookie.*`
5. **Tooltips** use the `.tooltip` suffix: `toolbar.add_row` for tooltip text
6. **Plurals**: not needed yet — handle case-by-case if required

## Usage in Widgets

```python
# In __init__ or _setup_ui:
self._title.setText(self.translator.t("dashboard.title"))

# Always implement retranslate():
def retranslate(self):
    self._title.setText(self.translator.t("dashboard.title"))
    self._desc.setText(self.translator.t("dashboard.description"))
```

## retranslate() Contract

- Every i18n-aware widget MUST implement `retranslate()`
- Connect to signal in `__init__`: `self.translator.language_changed.connect(self.retranslate)`
- Update ALL user-visible text: labels, tooltips, button text, window titles, placeholders

## Adding a New Language

1. Create `app/i18n/<code>.json` (copy from `en.json`)
2. Add language option to `SettingsPage._lang_combo`
3. Add language to `Translator.LANGUAGES`
4. Translate all keys
